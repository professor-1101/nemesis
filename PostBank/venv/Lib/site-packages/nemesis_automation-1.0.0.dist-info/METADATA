Metadata-Version: 2.4
Name: nemesis-automation
Version: 1.0.0
Summary: BDD Test Automation Framework with Behave & Playwright
Author: Professor
Author-email: Your Name <your.email@example.com>
License-Expression: MIT
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Testing
Classifier: Programming Language :: Python :: 3
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: behave>=1.2.6
Requires-Dist: playwright>=1.40.0
Requires-Dist: behave-reportportal>=5.0.0
Requires-Dist: reportportal-client>=5.5.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: rich>=13.7.0
Requires-Dist: click>=8.1.7
Requires-Dist: pydantic>=2.5.0
Requires-Dist: pydantic-settings>=2.1.0
Requires-Dist: requests>=2.32.3
Requires-Dist: urllib3>=1.21.1
Requires-Dist: imageio-ffmpeg>=0.5.0
Provides-Extra: dev
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: pytest>=8.0.0; extra == "dev"
Requires-Dist: black>=24.0; extra == "dev"
Requires-Dist: isort>=5.12.0; extra == "dev"
Requires-Dist: pre-commit>=3.0.0; extra == "dev"
Dynamic: author
Dynamic: requires-python

# Nemesis Test Automation Framework

**Modern BDD Test Automation Framework** built with Clean Architecture, Domain-Driven Design, and SOLID principles.

---

## ğŸ“‹ Table of Contents

- [Features](#features)
- [Installation](#installation)
- [Quick Start](#quick-start)
- [Configuration](#configuration)
- [CLI Commands](#cli-commands)
- [Architecture](#architecture)
- [Running Tests](#running-tests)
- [Development](#development)
- [Troubleshooting](#troubleshooting)

---

## âœ¨ Features

- âœ… **Clean Architecture** - Domain, Application, Infrastructure layers
- âœ… **Domain-Driven Design** - Value Objects, Entities, Use Cases
- âœ… **SOLID Principles** - Maintainable, testable code
- âœ… **BDD with Behave** - Gherkin syntax for readable tests
- âœ… **Multiple Browsers** - Chromium, Firefox, WebKit via Playwright
- âœ… **Real-time Reporting** - Live test execution feedback
- âœ… **JSON Reports** - Structured test results
- âœ… **100% Domain Coverage** - Comprehensive test suite
- âœ… **Network-Independent Testing** - Mock-based integration tests
- âœ… **Observability Ready** - Structured for distributed tracing

---

## ğŸš€ Installation

### Prerequisites

- **Python 3.11+**
- **pip**
- **Node.js 18+** (for Playwright browsers)

### Install Package

```bash
# Clone repository
git clone https://github.com/your-org/nemesis.git
cd nemesis/Nemesis

# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install package with dependencies
pip install -e .

# Install Playwright browsers
playwright install chromium
```

### Verify Installation

```bash
nemesis --version
```

---

## ğŸ¯ Quick Start

### 1. Initialize Project

```bash
nemesis init
```

This creates:
- `nemesis.config.yml` - Configuration file
- `features/` - Feature files directory
- `features/steps/` - Step definitions
- `features/environment.py` - Behave hooks

### 2. Create Feature File

`features/login.feature`:
```gherkin
@smoke
Feature: User Login

  @critical
  Scenario: User can login with valid credentials
    Given I am on the login page
    When I enter username "standard_user"
    And I enter password "secret_sauce"
    And I click the login button
    Then I should see the dashboard
```

### 3. Implement Steps

`features/steps/login_steps.py`:
```python
from behave import given, when, then

@given('I am on the login page')
def step_impl(context):
    context.page.goto("https://www.saucedemo.com")

@when('I enter username "{username}"')
def step_impl(context, username):
    context.page.fill("#user-name", username)

@when('I enter password "{password}"')
def step_impl(context, password):
    context.page.fill("#password", password)

@when('I click the login button')
def step_impl(context):
    context.page.click("#login-button")

@then('I should see the dashboard')
def step_impl(context):
    assert context.page.is_visible(".inventory_list")
```

### 4. Run Tests

```bash
# Run all tests
nemesis run

# Run specific tags
nemesis run --tags @smoke

# Run in headless mode
nemesis run --headless
```

---

## âš™ï¸ Configuration

### Configuration File

`nemesis.config.yml`:

```yaml
# Project
project:
  name: "My Test Project"
  version: "1.0.0"

# Browser
browser:
  type: "chromium"  # chromium, firefox, webkit
  headless: false
  viewport:
    width: 1280
    height: 720
  timeout: 30000  # milliseconds

# Environments
environments:
  dev:
    base_url: "https://dev.example.com"
  staging:
    base_url: "https://staging.example.com"
  prod:
    base_url: "https://example.com"

# Reporting
reporting:
  local:
    enabled: true
    output_dir: "reports"

# Execution
execution:
  parallel: 1
  screenshot_on_failure: true
  video: false
  trace: false
```

### Environment Variables

```bash
# Browser
export NEMESIS_BROWSER="chromium"
export NEMESIS_HEADLESS="true"

# Environment
export NEMESIS_ENV="prod"
```

---

## ğŸ–¥ï¸ CLI Commands

### `nemesis run`

Execute test scenarios.

```bash
# Basic usage
nemesis run

# With tags
nemesis run --tags @smoke
nemesis run --tags "@smoke and @critical"

# Specific feature
nemesis run --feature features/login.feature

# Environment
nemesis run --env prod

# Headless mode
nemesis run --headless

# Parallel execution
nemesis run --parallel 4

# Browser selection
nemesis run --browser firefox

# Debug mode
nemesis run --debug --verbose
```

**Options:**

| Option | Description | Default |
|--------|-------------|---------|
| `--tags` `-t` | Run scenarios with specific tags | All |
| `--feature` `-f` | Run specific feature file | All |
| `--env` `-e` | Environment (dev/staging/prod) | `dev` |
| `--headless` | Run in headless mode | `False` |
| `--parallel` `-p` | Number of parallel workers | `1` |
| `--browser` `-b` | Browser type | `chromium` |
| `--debug` | Enable debug logging | `False` |
| `--verbose` `-v` | Verbose output | `False` |

### `nemesis init`

Initialize a new project.

```bash
nemesis init
nemesis init --force  # Overwrite existing config
```

### `nemesis list`

List recent test executions.

```bash
nemesis list
nemesis list --limit 5
```

### `nemesis open`

Open latest test report.

```bash
nemesis open
nemesis open --execution-id exec_20251216_120000
```

### `nemesis clean`

Clean old test reports.

```bash
nemesis clean
nemesis clean --days 3
nemesis clean --dry-run  # Preview only
```

### `nemesis validate`

Validate feature files.

```bash
nemesis validate
nemesis validate --feature features/login.feature
```

---

## ğŸ—ï¸ Architecture

Nemesis follows **Clean Architecture** principles:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CLI Layer                    â”‚
â”‚  - Commands (run, init, etc.)       â”‚
â”‚  - UI (progress, tables, colors)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ uses
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Application Layer               â”‚
â”‚  - RunTestsUseCase                  â”‚
â”‚  - ExecuteTestScenarioUseCase       â”‚
â”‚  - Coordinators                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ uses
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Domain Layer                 â”‚
â”‚  - Execution, Scenario, Step        â”‚
â”‚  - ExecutionId, Duration, Status    â”‚
â”‚  - Ports (IReporter, IBrowser, ...) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ implemented by
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Infrastructure Layer             â”‚
â”‚  - PlaywrightBrowserDriver          â”‚
â”‚  - JSONReporter, ConsoleReporter    â”‚
â”‚  - SigNozShipper, LocalFileShipper  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Components

**Domain Layer** (`src/nemesis/domain/`):
- **Entities**: `Execution`, `Scenario`, `Step` - Business logic
- **Value Objects**: `ExecutionId`, `Duration`, `ScenarioStatus`, `StepStatus`
- **Ports**: `IReporter`, `IBrowserDriver`, `ICollector`, `ILogShipper`

**Application Layer** (`src/nemesis/application/`):
- **Use Cases**: `RunTestsUseCase`, `ExecuteTestScenarioUseCase`
- **Coordinators**: `ExecutionCoordinator`, `ScenarioCoordinator`

**Infrastructure Layer** (`src/nemesis/infrastructure/`):
- **Browser**: `PlaywrightBrowserDriver`
- **Reporting**: `JSONReporter`, `ConsoleReporter`
- **Logging**: `LocalFileShipper`, `SigNozShipper`

**CLI Layer** (`src/nemesis/cli/`):
- **Commands**: `run`, `init`, `list`, `open`, `clean`, `validate`
- **UI**: Progress bars, tables, colors

### Benefits

- âœ… **Testable**: Each layer tested independently
- âœ… **Flexible**: Easy to swap implementations
- âœ… **Maintainable**: Clear separation of concerns
- âœ… **Scalable**: Ready for distributed systems

---

## ğŸ§ª Running Tests

### Unit Tests (Domain Layer)

```bash
# Run all domain tests
pytest tests/unit/domain/ -v

# With coverage
pytest tests/unit/domain/ --cov=src/nemesis/domain --cov-report=term-missing

# Expected: 111 tests, 100% coverage, ~2 seconds
```

### Integration Tests

```bash
# Run integration tests (no network needed)
pytest tests/integration/ -v

# Expected: 5 tests, ~1 second
```

### E2E Tests

```bash
# Run E2E tests for ports/infrastructure
pytest tests/e2e/ -v

# Expected: 9 tests, ~1 second
```

### All Tests

```bash
# Run everything
pytest tests/ -v

# With coverage
pytest tests/ --cov=src/nemesis --cov-report=html
```

---

## ğŸ’» Development

### Project Structure

```
nemesis/
â”œâ”€â”€ src/nemesis/
â”‚   â”œâ”€â”€ domain/              # Domain Layer
â”‚   â”‚   â”œâ”€â”€ entities/        # Execution, Scenario, Step
â”‚   â”‚   â”œâ”€â”€ value_objects/   # ExecutionId, Duration, Status
â”‚   â”‚   â””â”€â”€ ports/           # Interfaces (IReporter, IBrowser, etc.)
â”‚   â”œâ”€â”€ application/         # Application Layer
â”‚   â”‚   â”œâ”€â”€ use_cases/       # RunTestsUseCase, etc.
â”‚   â”‚   â””â”€â”€ services/        # Coordinators
â”‚   â”œâ”€â”€ infrastructure/      # Infrastructure Layer
â”‚   â”‚   â”œâ”€â”€ browser/         # PlaywrightBrowserDriver
â”‚   â”‚   â”œâ”€â”€ reporting/       # JSONReporter, ConsoleReporter
â”‚   â”‚   â””â”€â”€ logging/         # LocalFileShipper, SigNozShipper
â”‚   â””â”€â”€ cli/                 # CLI Layer
â”‚       â”œâ”€â”€ commands/        # run, init, list, etc.
â”‚       â””â”€â”€ ui/              # Progress bars, tables, LiveReporter
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/domain/         # Domain layer tests (100% coverage)
â”‚   â”œâ”€â”€ integration/         # Integration tests
â”‚   â””â”€â”€ e2e/                 # E2E tests for ports
â”œâ”€â”€ features/                # BDD feature files
â”œâ”€â”€ nemesis.config.yml       # Configuration
â”œâ”€â”€ pyproject.toml           # Package config
â”œâ”€â”€ setup.py                 # Package setup
â””â”€â”€ README.md                # This file
```

### Adding New Features

**1. Add Domain Entity/Value Object:**

```python
# src/nemesis/domain/value_objects/new_value.py
@dataclass(frozen=True)
class NewValue:
    """Your value object"""
    value: str
```

**2. Add Use Case:**

```python
# src/nemesis/application/use_cases/new_use_case.py
class NewUseCase:
    """Your use case"""
    def execute(self, ...):
        pass
```

**3. Add Infrastructure Implementation:**

```python
# src/nemesis/infrastructure/new_adapter.py
class NewAdapter(IPort):
    """Your adapter"""
    def method(self):
        pass
```

**4. Add CLI Command:**

```python
# src/nemesis/cli/commands/new_command.py
@click.command()
def new_command():
    """Your command"""
    pass
```

### Testing Strategy

1. **Unit Tests** - Domain layer (100% coverage required)
2. **Integration Tests** - Application + Infrastructure
3. **E2E Tests** - Full workflow with real/mocked components
4. **Business Tests** - BDD scenarios in `features/`

### Code Quality

```bash
# Format code
black src/ tests/

# Lint
ruff check src/ tests/

# Type check
mypy src/

# Run all quality checks
black src/ tests/ && ruff check src/ tests/ && mypy src/
```

---

## ğŸ”§ Troubleshooting

### Tests Not Found

```bash
# Verify feature files exist
ls features/*.feature

# Validate features
nemesis validate
```

### Browser Launch Failed

```bash
# Install Playwright browsers
playwright install chromium

# Check browser
nemesis run --browser chromium --debug
```

### Import Errors

```bash
# Reinstall package
pip install -e .

# Verify installation
python -c "import nemesis; print(nemesis.__version__)"
```

### Report Not Generated

```bash
# Check output directory
ls -la reports/

# Check permissions
chmod -R 755 reports/

# Enable debug
nemesis run --debug
```

### Network Issues

The framework includes network-independent integration tests:

```bash
# Run without network
pytest tests/integration/ -v
```

---

## ğŸ“š Additional Resources

### Documentation

- **Architecture**: See Clean Architecture diagram above
- **Domain Model**: `src/nemesis/domain/`
- **Ports & Adapters**: `src/nemesis/domain/ports/`

### Examples

See `features/` directory for BDD examples.

### Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/new-feature`)
3. Write tests (unit + integration)
4. Ensure 100% domain coverage
5. Follow Clean Architecture principles
6. Submit pull request

### DoD (Definition of Done)

All code must follow:
- âœ… **Domain-Driven Design (DDD)** - Value Objects, Entities, Use Cases
- âœ… **Clean Architecture** - Layer separation, dependency rule
- âœ… **SOLID Principles** - SRP, OCP, LSP, ISP, DIP
- âœ… **Clean Code** - Readable, maintainable, intent-revealing
- âœ… **Test Coverage** - 100% domain, comprehensive integration/E2E
- âœ… **Observability** - Structured logging, tracing-ready

---

## ğŸ“Š Test Results

### Coverage Summary

```
Domain Layer:     100% (111 tests)
Integration:      5 tests
E2E:              9 tests
Total:            125 tests
Execution Time:   ~4 seconds
```

### Test Breakdown

| Layer | Tests | Coverage | Time |
|-------|-------|----------|------|
| Domain | 111 | 100% | ~2s |
| Integration | 5 | N/A | ~1s |
| E2E | 9 | N/A | ~1s |

---

## ğŸ¯ Comparison with Other Frameworks

| Feature | Nemesis | Cypress | Playwright |
|---------|---------|---------|------------|
| **Language** | Python | JavaScript | JavaScript/Python |
| **Architecture** | Clean | Monolithic | Framework-based |
| **BDD** | âœ… Behave | âŒ | âœ… Plugin |
| **DDD** | âœ… | âŒ | âŒ |
| **100% Coverage** | âœ… | N/A | N/A |
| **Parallel** | âœ… Free | âœ… Paid | âœ… Free |
| **Real-time UI** | âœ… | âœ… | âœ… |

---

## ğŸ“ License

MIT License - See LICENSE file for details.

---

## ğŸ¤ Support

- **Issues**: [GitHub Issues](https://github.com/your-org/nemesis/issues)
- **Discussions**: [GitHub Discussions](https://github.com/your-org/nemesis/discussions)
- **Email**: support@example.com

---

**Built with â¤ï¸ using Clean Architecture, DDD, and SOLID principles.**
